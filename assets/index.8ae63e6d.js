var C=Object.defineProperty;var N=(s,t,e)=>t in s?C(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var h=(s,t,e)=>(N(s,typeof t!="symbol"?t+"":t,e),e),b=(s,t,e)=>{if(!t.has(s))throw TypeError("Cannot "+e)};var v=(s,t,e)=>(b(s,t,"read from private field"),e?e.call(s):t.get(s)),T=(s,t,e)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,e)},E=(s,t,e,o)=>(b(s,t,"write to private field"),o?o.call(s,e):t.set(s,e),e);import{e as F}from"./vendor.d8cc8c60.js";const O=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}};O();const p=s=>s*(Math.PI/180),S=s=>s.map(t=>{const e=document.createElement("option");return e.textContent=t,e.value=t,e}),P=({width:s,height:t})=>Object.assign(document.createElement("canvas"),{width:s,height:t}),L=(s,t)=>{const{actualBoundingBoxAscent:e,actualBoundingBoxDescent:o,actualBoundingBoxLeft:i,actualBoundingBoxRight:n}=s.measureText(t);return{width:Math.abs(i)+Math.abs(n),height:e+o}},k=(s,t,e=o=>o)=>new Promise(o=>{let i=null;requestAnimationFrame(async function n(c){i||(i=c);const d=c-i,a=Math.min(d/s,1),r=e(a);if(await t(r),a===1)return o();requestAnimationFrame(n)})});var g;class D extends EventTarget{constructor({container:t,width:e,height:o}){super();h(this,"grid");h(this,"chart");h(this,"width");h(this,"height");h(this,"container");h(this,"padding",20);h(this,"extremums",{x:{min:-20,max:20},y:{min:-100,max:100}});h(this,"edges");h(this,"scale");h(this,"center");T(this,g,void 0);h(this,"easing",t=>t);this.width=e,this.height=o,this.container=t,this.container.style.position="relative",this.container.style.width=`${this.width}px`,this.container.style.height=`${this.height}px`,this.grid=this.createLayer(),this.chart=this.createLayer(),this.container.append(this.grid.canvas,this.chart.canvas),this.edges=this.calcEdges(),this.scale=this.calcScale(),this.center=this.calcCenter(),this.renderGrid()}set fn(t){var e;if(typeof t!="function")throw new TypeError("fn should be a function");this.dispatchEvent(new CustomEvent("transitionstart")),this.animatedFunctionTransition((e=v(this,g))!=null?e:()=>0,t).then(()=>this.dispatchEvent(new CustomEvent("transitionend"))),E(this,g,t),this.drawFunction(v(this,g))}createLayer(){const t=P({width:this.width,height:this.height});t.classList.add("absolute","top-0","right-0","bottom-0","left-0");const e=t.getContext("2d");return{canvas:t,ctx:e}}calcEdges(){return{top:this.padding,right:this.width-this.padding,bottom:this.height-this.padding,left:this.padding}}calcScale(){return{x:(this.edges.right-this.edges.left)/(this.extremums.x.max-this.extremums.x.min),y:(this.edges.bottom-this.edges.top)/(this.extremums.y.max-this.extremums.y.min)}}calcCenter(){return{x:(this.edges.left+this.edges.right)/2,y:(this.edges.top+this.edges.bottom)/2}}renderGrid(){this.grid.ctx.save(),this.grid.ctx.lineWidth=2,this.grid.ctx.strokeStyle="#a2a3a4",this.grid.ctx.font="16px consolas",this.grid.ctx.fillStyle="#a2a3a4",this.grid.ctx.moveTo(this.edges.left,this.center.y),this.grid.ctx.lineTo(this.edges.right,this.center.y),this.grid.ctx.moveTo(this.center.x,this.edges.top),this.grid.ctx.lineTo(this.center.x,this.edges.bottom),this.grid.ctx.lineWidth=1;const t=10,e=10,o=()=>{const n=r=>{const l=this.edges.left+(r-this.extremums.x.min)*this.scale.x;this.grid.ctx.moveTo(l,this.center.y-t/2),this.grid.ctx.lineTo(l,this.center.y+t/2),this.grid.ctx.save();const m=r.toFixed(1),{width:f}=L(this.grid.ctx,m);this.grid.ctx.translate(l-f/2,this.center.y+t+e),this.grid.ctx.rotate(p(45)),this.grid.ctx.fillText(m,0,0),this.grid.ctx.restore()},c=(this.extremums.x.min+this.extremums.x.max)/2,d=this.extremums.x.max,a=(d-c)/10;for(let r=c;r<=d;r+=a)n(r);for(let r=c-a;r>=this.extremums.x.min;r-=a)n(r)},i=()=>{const n=r=>{const l=this.edges.bottom-(r-this.extremums.y.min)*this.scale.y;this.grid.ctx.moveTo(this.center.x-t/2,l),this.grid.ctx.lineTo(this.center.x+t/2,l),this.grid.ctx.save(),this.grid.ctx.textBaseline="top",this.grid.ctx.textAlign="left";const m=r.toFixed(1),{width:f}=L(this.grid.ctx,m),w=p(45);this.grid.ctx.translate(this.center.x-t/2-e-f*Math.cos(w),l-f*Math.sin(w)/2),this.grid.ctx.rotate(w),this.grid.ctx.fillText(m,0,0),this.grid.ctx.restore()},c=(this.extremums.y.min+this.extremums.y.max)/2,d=this.extremums.y.max,a=(d-c)/10;for(let r=c;r<=d;r+=a)n(r);for(let r=c-a;r>=this.extremums.y.min;r-=a)n(r)};o(),i(),this.grid.ctx.stroke(),this.grid.ctx.restore()}drawFunction(t){this.chart.ctx.clearRect(0,0,this.width,this.height),this.chart.ctx.save(),this.chart.ctx.lineWidth=2,this.chart.ctx.beginPath();const e=i=>{const n=t(this.extremums.x.min+i/this.scale.x);return this.center.y-this.scale.y*n},o=1;this.chart.ctx.moveTo(this.edges.left,e(this.edges.left));for(let i=this.edges.left+o;i<=this.edges.right;i+=o)this.chart.ctx.lineTo(this.padding+i,e(i));this.chart.ctx.strokeStyle="cornflowerblue",this.chart.ctx.stroke(),this.chart.ctx.restore()}async animatedFunctionTransition(t,e){const o=n=>Number.isNaN(n)?0:n;await k(1e3,n=>{this.drawFunction(c=>{const[d,a]=[t(c),e(c)].map(o);return d+n*(a-d)})},this.easing)}}g=new WeakMap;const M={square:s=>s**2,cube:s=>s**3,sqrt:Math.sqrt,sin:s=>Math.sin(p(s)),cos:s=>Math.cos(p(s))};const x=document.querySelector("#easing");x.append(...S(Object.keys(F)));const u=document.querySelector("#functions");u.append(...S(Object.keys(M)));const A=document.querySelector("#chart"),y=new D({container:A,width:window.innerWidth*.8,height:window.innerHeight*.8});y.addEventListener("transitionstart",()=>{u.disabled=!0,x.disabled=!0});y.addEventListener("transitionend",()=>{u.disabled=!1,x.disabled=!1});const q=()=>{y.fn=M[u.value]},B=()=>{y.easing=F[x.value]};B();q();u.addEventListener("input",q);x.addEventListener("input",B);
